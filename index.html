<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ucapan Wisuda Dea Aprilia</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: #fce4ec;
      color: #4a148c;
      text-align: center;
    }
    .container { max-width: 700px; margin: auto; padding: 20px; }
    .hidden { display: none; }
    input, textarea, button {
      padding: 10px;
      margin: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      width: 80%;
    }
    button { cursor: pointer; background: #8e24aa; color: white; border: none; }
    .wish { background: white; padding: 10px; border-radius: 10px; margin: 10px 0; text-align: left; }
    .reply { background: #f8bbd0; margin-top: 8px; padding: 8px; border-left: 3px solid #c2185b; border-radius: 6px; }
  </style>
</head>
<body>
  <div class="container">
    <div id="login-section">
      <h2>Login Ucapan Wisuda</h2>
      <input type="text" id="username" placeholder="Username" required>
      <input type="password" id="password" placeholder="Password" required>
      <button onclick="login()">Login</button>
      <p id="login-error" style="color:red"></p>
    </div>

    <div id="main-section" class="hidden">
      <h1 class="animate__animated animate__fadeInDown">Selamat Wisuda, Dea Aprilia!</h1>
      <p>Langit hari ini berseri, karena kamu berseragam toga âœ¨</p>

      <form onsubmit="sendWish(event)">
        <input type="text" id="name" placeholder="Namamu" required><br>
        <textarea id="message" placeholder="Ucapanmu" required></textarea><br>
        <button type="submit">Kirim Ucapan</button>
      </form>

      <div id="wishes"></div>
    </div>
  </div>

  <script>
    const USERS = [
      { username: 'dea', password: 'dea123', role: 'admin' },
      { username: 'teman', password: 'teman123', role: 'user' }
    ];

    let currentUser = null;

    function login() {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const user = USERS.find(u => u.username === username && u.password === password);

      if (user) {
        currentUser = user;
        document.getElementById('login-section').classList.add('hidden');
        document.getElementById('main-section').classList.remove('hidden');
        loadWishes();
      } else {
        document.getElementById('login-error').innerText = 'Username atau password salah';
      }
    }

    // Dummy wish array untuk contoh (ganti dengan Supabase jika ingin)
    const wishes = [];

    function sendWish(e) {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const message = document.getElementById('message').value;

      const newWish = {
        name,
        message,
        reply: currentUser.role === 'admin' ? 'Terima kasih banyak ya!' : ''
      };
      wishes.unshift(newWish);
      document.getElementById('name').value = '';
      document.getElementById('message').value = '';
      loadWishes();
    }

    function loadWishes() {
      const wishesDiv = document.getElementById('wishes');
      wishesDiv.innerHTML = '';
      wishes.forEach(wish => {
        wishesDiv.innerHTML += `
          <div class="wish animate__animated animate__fadeIn">
            <strong>${wish.name}</strong><br>${wish.message}
            ${wish.reply ? `<div class="reply"><strong>Dea Aprilia:</strong><br>${wish.reply}</div>` : ''}
          </div>
        `;
      });
    }
  </script>
</body>
</html>
